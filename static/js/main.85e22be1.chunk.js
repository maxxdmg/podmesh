(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(21)},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(9),o=a.n(s),l=a(11),c=a(7),i=a.n(c),d=a(10),m=a(12),u=a(1),p=a(2),h=a(5),f=a(3),g=a(6),v=function(e){return n.a.createElement("div",{className:"card-body shadow-sm bg-dark rounded-right\r d-flex flex-column align-items-start text-white"},n.a.createElement("strong",{className:"mb-0"},e.title),n.a.createElement("div",{className:"mb-0"},e.date),n.a.createElement("audio",{className:"w-100",controls:!0,src:e.media}))},b=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{className:"card flex-md-row mb-4 box-shadow h-md-250"},n.a.createElement("img",{className:"card-img-left rounded-left p-0 border-none flex-auto d-none d-md-block",style:{minWidth:"8.5vw",maxWidth:"25.6vw",height:"128px"},src:this.props.podThumbnail,alt:"broken!",onError:this.props.imgBroken}),n.a.createElement(v,{date:this.props.podDate,title:this.props.podTitle,media:this.props.podMedia})))}}]),t}(r.Component),E=a(4),w=function(e){return n.a.createElement("div",{className:"form-inline"},n.a.createElement("input",{className:"form-control mr-sm-3 ml-sm-3",placeholder:"RSS Feed URL","aria-label":"FeedURL",onChange:e.inputChange}),n.a.createElement("button",{onClick:e.enterHandler,style:{height:"2.5em"},className:"btn btn-outline-success my-2 my-sm-0 mr-sm-3"},"Enter"),n.a.createElement("button",{className:"btn btn-outline-warning mr-sm-3",style:{width:"2.5em",height:"2.5em"}},n.a.createElement(E.b,{className:"mb-1"})),n.a.createElement("a",{href:"https://github.com/maxxdmg/podmesh"},n.a.createElement(E.a,{size:"2.85em"})))},N=function(e){return n.a.createElement("nav",{className:"navbar navbar-dark bg-dark row"},n.a.createElement("div",{className:"col col-md-1 col-0"}),n.a.createElement("div",{className:"col col-md-auto col-2"},n.a.createElement("h1",{className:"navbar-brand"},"Podmesh")),n.a.createElement("div",{className:"col col-md-auto col-0"}),n.a.createElement("div",{className:"col col-md-auto col-7"},n.a.createElement(w,{inputText:e.inputText,inputChange:e.inputChange,enterHandler:e.enterHandler})),n.a.createElement("div",{className:"col col-md-1 col-0"}))},y=function(e){var t=n.a.createElement("p",{className:"lead"}," ",e.msgText," ");return e.msgUpdated&&(t=n.a.createElement("div",null,n.a.createElement("p",{className:"lead"},e.msgText),n.a.createElement("div",{className:"w-100"}),n.a.createElement("p",{className:"lead"},e.msgUpdated))),n.a.createElement("div",{className:"jumbotron shadow p-3 p-md-5 mt-3 text-white rounded bg-dark"},n.a.createElement("h1",{className:"display-4"},e.msgHeader),t)},x=(a(20),function(e){return n.a.createElement("div",{className:"loader"})}),k=function(e){return n.a.createElement("div",{className:"alert alert-danger mt-3",role:"alert"},n.a.createElement("h4",null,e.errText))},j=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={podNumCap:10,podNum:0,podcasts:[],owner:"",lastUpdated:"",feed:["http://feeds.twit.tv/sn.xml","http://lpotl.libsyn.com/rss","https://rss.art19.com/hello-from-the-magic-tavern","http://wizbru.libsyn.com/rss"],currentFeed:"",loading:!1,error:null},a.getFeed=function(e){a.setState({loading:!0,podcasts:[]});var t="https://api.rss2json.com/v1/api.json?rss_url="+encodeURI(e);return fetch(t).then(function(e){return e.text().then(function(e){var t=JSON.parse(e);return"ok"!==t.status?a.setState({podcasts:[],error:"Invalid url. Are you sure it is an rss feed?"}):"audio/mpeg"!==t.items[0].enclosure.type&&a.setState({podcasts:[],error:"Invalid rss feed. Must be a podcast rss feed"}),t}).catch(function(e){return a.setState({error:e})})}).catch(function(e){return a.setState({error:e})})},a.parseDate=function(e){for(var t="",a=0;a<10;a++)t+=e[a];return t},a.parsePodcastDate=function(e){var t=e.date,a=t.slice(0,4),r=t.slice(5,7),n=t.slice(8,10);return Object(m.a)({},e,{year:a,month:r,day:n})},a.generateKey=function(e,t){var a=Math.floor(9900*Math.random())+100,r=Math.floor(9900*Math.random())+100,n=Math.floor(9900*Math.random())+100;return String(e)+String(t)+String(a)+String(r)+String(n)},a.imageBroken=function(){return"Image Unavailable"},a.dateCompare=function(e,t){var a=t.year-e.year;if(0===a){var r=t.month-e.month;if(0===r){var n=t.day-e.day;return 0===n?0:n}return r}return a},a.enterFeedHandler=function(){var e=Object(d.a)(i.a.mark(function e(t,r){var n,s,o,l,c,d,m,u,p,h,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getFeed(t);case 2:if("ok"===(n=e.sent).status&&"audio/mpeg"===n.items[0].enclosure.type){e.next=5;break}return e.abrupt("return");case 5:for(s=[],o=0,l=n.feed.title,c="",d=0;d<r;d++)m=n.items[d].title,u=n.items[d].enclosure.link,p=n.feed.image,h=n.items[d].pubDate,0===d&&(c=a.parseDate(h)),f={owner:l,title:m,date:h,mediaUrl:u,thumbnail:p},f=a.parsePodcastDate(f),o++,s.push(f);a.setState({podcasts:s,owner:l,lastUpdated:c,podNum:o,loading:!1,error:null});case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.newFeedHandler=function(e){return a.setState({currentFeed:e.target.value})},a.addFeed=function(e){return a.setState({feed:[].concat(Object(l.a)(a.state.feed),[e])})},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.currentFeed===t.currentFeed}},{key:"render",value:function(){var e=this,t=null,a=n.a.createElement(y,{msgHeader:"No podcast feed loaded",msgText:"Enter the rss url of a podcast to view and listen to it's feed"});this.state.loading&&(a=n.a.createElement(x,null));var r=null;if(this.state.error&&(r=n.a.createElement(k,{errText:this.state.error})),this.state.podcasts.length&&!this.state.loading){var s=this.state.podcasts.sort(this.dateCompare),o="loaded feed for '"+this.state.owner+"'",l="Displaying "+this.state.podNum+" episodes \n",c="Last updated "+this.state.lastUpdated+"\n";a=n.a.createElement(y,{msgHeader:o,msgText:l,msgUpdated:c}),t=s.map(function(t){return n.a.createElement(b,{key:e.generateKey(t.title,t.date),imgBroken:e.imageBroken,podTitle:t.title,podMedia:t.mediaUrl,podThumbnail:t.thumbnail,podDate:e.parseDate(t.date)})})}return n.a.createElement("div",null,n.a.createElement(N,{inputText:this.state.currentFeed,inputChange:this.newFeedHandler,enterHandler:function(){return e.enterFeedHandler(e.state.currentFeed,10)}}),n.a.createElement("div",{className:"container"},r,a,n.a.createElement("div",{className:"row mb-2"},t)))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.85e22be1.chunk.js.map